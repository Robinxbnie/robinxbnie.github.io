<!DOCTYPE html>
<html ng-app="myModule">
<head>
    <meta charset="utf-8" />
    <title> Robin's Homepage </title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
    <script type="text/javascript" src="https://code.highcharts.com/highcharts.js"></script>
    <style type="text/css">
         #map{
            width:1200px;
            height:200px
         }
         #linechart{
            float: left;
            display: inline-block;
         }
         #piechart{
            float: left;
            display:inline-block;
         }
         h3{
            text-align: center;
         }

    </style>

</head>
<body ng-controller="myController">
     <h3>Robin has worked or lived at these places</h3>
     <div id="map">My map will go here</div>
     <hc-chart options="chartOptions" id='linechart'>Placeholder for generic chart</hc-chart>
     <hc-pie-chart title="Robin's Skills Distribution" data="pieData" id="piechart">Placeholder for pie chart</hc-pie-chart>    
    
    <script>

        function myMap() {
            var locations = [
                                ['Calgary',51, -114],
                                ['Basrah',30.5,47.8],
                                ['Hafaya', 31.9,47.1],
                                ['Beijing', 39.9, 116.4],
                                ['Korle',41.7,86.2],
                                ['Shenzhen', 22.5,114.1],
                                ['Chengdu',30.6, 104.1],
                                ['Daqing',46.6,125.1],
                                ['Huanggang',30.5,114.9]
                            ];

            var mapOptions = {
                center: new google.maps.LatLng(37.00, 150.00),
                zoom: 2,
                mapTypeId: google.maps.MapTypeId.HYBRID
            }
            var map = new google.maps.Map(document.getElementById("map"), mapOptions);

            var marker, i;

            for(i=0; i < locations.length; i++){
                marker = new google.maps.Marker({
                                position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                                map: map
                });
            }
        }

        // google.maps.event.addDomListener(window, 'load', initialize);

        angular.module('myModule', [])
            // Directive for generic chart, pass in chart options
            .directive('hcChart', function () {
                return {
                    restrict: 'E',
                    template: '<div></div>',
                    scope: {
                        options: '='
                    },
                    link: function (scope, element) {
                        Highcharts.chart(element[0], scope.options);
                    }
                };
            })
            // Directive for pie charts, pass in title and data only    
            .directive('hcPieChart', function () {
                return {
                    restrict: 'E',
                    template: '<div></div>',
                    scope: {
                        title: '@',
                        data: '='
                    },
                    link: function (scope, element) {
                        Highcharts.chart(element[0], {
                            chart: {
                                type: 'pie'
                            },
                            title: {
                                text: scope.title
                            },
                            plotOptions: {
                                pie: {
                                    allowPointSelect: true,
                                    cursor: 'pointer',
                                    dataLabels: {
                                        enabled: true,
                                        format: '<b>{point.name}</b>: {point.percentage:.1f} %'
                                    }
                                }
                            },
                            series: [{
                                data: scope.data
                            }]
                        });
                    }
                };
            })
            .controller('myController', function ($scope) {
                
                // Sample options for first chart
                $scope.chartOptions = {
                    chart :{type: 'area'},
                    title: {
                        text: "Robin's Experience"
                    },
                    xAxis: {
                        categories: ['1979', '1980', '1981', '1982', '1983', '1984','1985', '1986', '1987', '1988', '1989',   
                                     '1990', '1991', '1992','1993', '1994', '1995', '1996', '1997', '1998','1999', 
                                     '2000', '2001', '2002','2003', '2004', '2005', '2006', '2007', '2008','2009',
                                     '2010', '2012','2013', '2014','2015', '2016','2017','2018']
                    },
                    yAxis: {
                        title: {
                            text: 'Experience Index'
                        },
                        opposite:false,                        
                        visible: true
                    },


                    credits: {
                                text: 'Linkedin Home Page',
                                href: 'https://www.linkedin.com/in/Robin-Xiang-Bin-Nie/'
                            },

                     legend: {
                                enabled: false,
                                align: 'right',
                                x: -20,
                                verticalAlign: 'top',
                                floating: true 
                            },


                    series: [{
                        data: [1,2,3,4,5,6,8.5,9.5,10.5,11.5,12.5,13.5,15,16,17,18.5,19.5,20.5,22,23,24.5,26,27.5,28.5,29.5,31,32,33,34,35,36,37,38,39,40,41,42,44,45]
                    }]
                };

                // Sample data for pie chart
                $scope.pieData = [{
                        name: "Petrophysics",
                        y: 13
                    }, {
                        name: "Geosteering",
                        y: 10
                    }, {
                        name: "Software Developer",
                        y: 3,
                        sliced: true,
                        selected: true
                    }, {
                        name: "Geoscience",
                        y: 13
                    }, {
                        name: "Marketing & Sales",
                        y: 8
                    }]
                // $scope.title = "Robin's Experience";
            });
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBv0TF6KuPEPfOXMdqp0-sf5YWML__gJu4&callback=myMap"></script>
</body>
</html>
